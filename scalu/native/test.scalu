sandbox test_bootstrap

map {
    boot: @blurb
    }

service blurb {
    [echo running init test]
    [echo passed]
    }

/*
sandbox test_file_creation

file {
    test : test
}

map {
    test_event : @file
    test : @file_test
    }

service file {
    [echo running file test]
    [exec test.cfg]
    }

service file_test {
    [echo passed]
    }
*/
sandbox test_equality

map {
    test_event : @equality
}

service equality{
    a = 5
    [echo running equality tests]
    [echo test 1]
    if (a == 5) {[echo passed]}
    [echo test 2]
    if (a == 5) {[echo passed]} else {[echo failed]}
    [echo test 3]
    if (a == 6) {[echo failed]} else {[echo passed]}
    [echo test 4]
    if (23 == 23) {[echo passed]} else {[echo failed]}
}

sandbox test_inequality

map {
    test_event : @inequality
}

service inequality {
    a = 6
    [echo running inequality tests]
    [echo test 1]
    if (a != 5) {[echo passed]}
    [echo test 2]
    if (a != 5) {[echo passed]} else {[echo failed]}
    [echo test 3]
    if (a != 6) {[echo failed]} else {[echo passed]}
    [echo test 4]
    if (23 != 23) {[echo failed]} else {[echo passed]}
}

sandbox test_copy

map {
    test_event : @copy
    }

service copy {
    a = 5
    [echo running copy tests]
    [echo test 1]
    a = 6
    if (a == 6) {[echo passed]} else {[echo failed]}
    [echo test 2]
    a = 7
    if (a == 7) {[echo passed]} else {[echo failed]}
    [echo test 3]
    b = 23
    a = b
    if (a == 23) {[echo passed]} else {[echo failed]}
}


sandbox test_bitwise_not

map {
    test_event : @bitwise_not
}

service bitwise_not {
    [echo running bitwise_not test]
    [echo test 1]
    a = 43 /* default bit size is relevant, but casting is not implemented */
    b = !a
    if (b == 212) {[echo passed]} else {[echo failed]}
    [echo test 2]
    b = !b
    if (b == 43) {[echo passed]} else {[echo failed]}
    [echo test 3]
    b = !255
    if (b == 0) {[echo passed]} else {[echo failed]}
}

sandbox test_bitwise_and

map {
    test_event : @bitwise_and
}

service bitwise_and {
    [echo running bitwise_and test]
    [echo test 1]
    a = 10 /* bit-pattern is 1010 */
    b = 12 /* bit-pattern is 1100 */
    c = a & b
    if (c == 8) {[echo passed]} else {[echo failed]}
    [echo test 2]
    c = b & a
    if (c == 8) {[echo passed]} else {[echo failed]}
    [echo test 3]
    d = c & (a & b)
    if (d == 8) {[echo passed]} else {[echo failed]}
    [echo test 4]
    c = 23 & 69
    d = 69 & 23
    if (c == 5) {[echo passed]} else {[echo failed]}
    [echo test 5]
    if (c == d) {[echo passed]} else {[echo failed]}
    [echo test 6]
    c = 23
    d = c & 69
    a = 69 & c
    if (d == 5) {[echo passed]} else {[echo failed]}
    [echo test 7]
    if (a == d) {[echo passed]} else {[echo failed]}
}

sandbox test_bitwise_or

map {
    test_event : @bitwise_or
    }

service bitwise_or {
    [echo running bitwise_or test]
    [echo test 1]
    a = 10
    b = 12
    c = (a | b)
    if (c == 14) {[echo passed]} else {[echo failed]}
    [echo test 2]
    c = (b | a)
    if (c == 14) {[echo passed]} else {[echo failed]}
    [echo test 3]
    d = (c | (a | b))
    if (d == 14) {[echo passed]} else {[echo failed]}
    [echo test 4]
    c = 23 | 69
    d = 69 | 23
    if (c == 87) {[echo passed]} else {[echo failed]}
    [echo test 5]
    if (c == d) {[echo passed]} else {[echo failed]}
    [echo test 6]
    c = 23
    d = c | 69
    a = 69 | c
    if (d == 87) {[echo passed]} else {[echo failed]}
    [echo test 7]
    if (a == d) {[echo passed]} else {[echo failed]}
}

map {
    test_event : @bitwise_xor
    }

service bitwise_xor {
    [echo running bitwise_xor test]
    [echo test 1]
    a = 10
    b = 12
    c = (a ^ b)
    if (c == 6) {[echo passed]} else {[echo failed]}
    [echo test 2]
    c = (b ^ a)
    if (c == 6) {[echo passed]} else {[echo failed]}
    [echo test 3]
    d = (c ^ (a ^ b))
    if (d == 0) {[echo passed]} else {[echo failed]}
    [echo test 4]
    c = 23 ^ 69
    d = 69 ^ 23
    if (c == 82) {[echo passed]} else {[echo failed]}
    [echo test 5]
    if (c == d) {[echo passed]} else {[echo failed]}
    [echo test 6]
    c = 23
    d = c ^ 69
    a = 69 ^ c
    if (d == 82) {[echo passed]} else {[echo failed]}
    [echo test 7]
    if (a == d) {[echo passed]} else {[echo failed]}
    [echo test 8]
    a = 32
    b = 0
    c = a ^ b
    if (c == 32) {[echo passed]} else {[echo failed]}
}

sandbox test_greater_than

map {
    test_event: @greater_than
    }

service greater_than {
    [echo running greater than tests]
    [echo test 1]
    a = 22
    b = 127
    if (a > b) {[echo failed]} else {[echo passed]}
    [echo test 2]
    if (b > b) {[echo failed]} else {[echo passed]}
    [echo test 3]
    if (b > a) {[echo passed]} else {[echo failed]}
}

sandbox test_greater_than_or_equal

map {
    test_event : @greater_than_or_equal
    }

service greater_than_or_equal {
    [echo running greater than or equal tests]
    [echo test 1]
    a = 84
    b = 102
    if (a >= b) {[echo failed]} else {[echo passed]}
    [echo test 2]
    if (b >= b) {[echo passed]} else {[echo failed]}
    [echo test 3]
    if (b >= a) {[echo passed]} else {[echo failed]}
    }

sandbox test_less_than

map {
    test_event: @less_than
    }

service less_than {
    [echo running less than tests]
    [echo test 1]
    a = 26
    b = 137
    if (a < b) {[echo passed]} else {[echo failed]}
    [echo test 2]
    if (b < b) {[echo failed]} else {[echo passed]}
    [echo test 3]
    if (b < a) {[echo failed]} else {[echo passed]}
}


sandbox test_less_than_or_equal

map {
    test_event: @less_than_or_equal
    }

service less_than_or_equal {
    [echo running less than or equal tests]
    [echo test 1]
    a = 30
    b = 147
    if (a <= b) {[echo passed]} else {[echo failed]}
    [echo test 2]
    if (b <= b) {[echo passed]} else {[echo failed]}
    [echo test 3]
    if (b <= a) {[echo failed]} else {[echo passed]}
}

sandbox test_addition

map {
    test_event : @addition
    }

service addition {
    [echo testing addition]
    [echo test 1]
    a = 10
    b = 12
    c = a + b
    if (c == 22) {[echo passed]} else {[echo failed]}
    [echo test 2]
    c = 10 + (a + b)
    if (c == 32) {[echo passed]} else {[echo failed]}
    [echo test 3]
    c = a + 0
    if (c == a) {[echo passed]} else {[echo failed]}
    [echo test 4]
    c = 255 + 1
    if (c == 0) {[echo passed]} else {[echo failed]}
}

sandbox test_subtraction

map {
    test_event : @subtraction
}

service subtraction {
    [echo testing subtraction]
    [echo test 1]
    a = 10
    b = 12
    c = b - a
    if (c == 2) {[echo passed]} else {[echo failed]}
    [echo test 2]
    c = 100 - (b - a)
    if (c == 98) {[echo passed]} else {[echo failed]}
    [echo test 3]
    c = a - 0
    if (c == a) {[echo passed]} else {[echo failed]}
    [echo test 4]
    c = 20 - 40
    if (c == 236) {[echo passed]} else {[echo failed]}
}

sandbox test_reference1

map {
    test_event : @test
}

service test {
    [echo testing references]
    [echo test 1]
    a = 27
}

sandbox test_reference2

map {
    test_event: @test
}

service test {
    b = test_reference1.a
    if (b == 27) {[echo passed]} else {[echo failed]}
    test_reference1.a = 7
    [echo test 2]
    if (test_reference1.a == 7) {[echo passed]} else {[echo failed]}
}

sandbox test_left_shift

map {
    test_event : @test
}

service test {
    [echo testing shift left]
    [echo test 1]
    a = 23
    b = a << 2
    if (b == 92) {[echo passed]} else {[echo failed]}
    [echo test 2]
    a = 7 << 5
    if (a == 224) {[echo passed]} else {[echo failed]}
}

sandbox test_right_shift

map {
    test_event : @test
}

service test {
    [echo testing right shift]
    [echo test 1]
    a = 92
    b = a >> 2
    if (b == 23) {[echo passed]} else {[echo failed]}
    [echo test 2]
    a = 224 >> 5
    if (a == 7) {[echo passed]} else {[echo failed]}
}

sandbox test_jump_statement

map {
    test_event : @test
}

service test {
    [echo testing jumps]
    [echo test 1]
    a = 3
    jump (a) { {[echo failed]} {[echo failed]} {[echo failed]} {[echo passed]} {[echo failed]} }
    [echo test 2]
    a = 3
    jump (a) { {[echo passed]} {[echo failed]} {[echo failed]} }
    [echo test 3]
    a = 6
    jump (a) { {[echo failed]} {[echo failed]}  {[echo passed]} {[echo failed]}} 
}

sandbox test_std_multiply

map {
    test_event: @test
}

service test {
    [echo testing std multiply]
    [echo test 1]
    std.input = 2
    std.input2 = 3
    [$multiply]
    if (std.output == 6) {[echo passed]} else {[echo failed]}
    [echo test 2]
    std.input = 5
    std.input2 = 0
    [$multiply]
    if (std.output == 0) {[echo passed]} else {[echo failed]}
    [echo test 3]
    std.input = 3
    std.input2 = 4
    [$multiply]
    if (std.output == 14) {[echo failed]} else {[echo passed]}
    [echo test 4]
    std.input = 0
    std.input2 = 4
    [$multiply]
    if (std.output == 0) {[echo passed]} else {[echo failed]}
    [echo test 5]
    std.input = 1
    std.input2 = 15
    [$multiply]
    if (std.output == 15) {[echo passed]} else {[echo failed]}
}

sandbox test_std_divide

map {
    test_event: @test
}

service test {
    [echo testing std divide]
    [echo test 1]
    std.input = 6
    std.input2 = 2
    [$divide]
    if (std.output == 3) {[echo passed]} else {[echo failed]}
    [echo test 2]
    std.input = 5
    std.input2 = 0
    [$divide]
    if (std.output == 0) {[echo passed]} else {[echo failed]}
    [echo test 3]
    std.input = 7
    std.input2 = 3
    [$divide]
    if (std.output == 2) {[echo passed]} else {[echo failed]}
    [echo test 4]
    std.input = 0
    std.input2 = 4
    [$divide]
    if (std.output == 0) {[echo passed]} else {[echo failed]}
    [echo test 5]
    std.input = 15
    std.input2 = 1
 /*   [$divide]
    if (std.output == 15) {[echo passed]} else {[echo failed]} */
}

sandbox test_std_cout

map {
    test_event: @test
}

service test {
    input3 = 3
	jump (input3) { {[echo 0]} {[echo 1]} {[echo 2]} {[echo 3]} {[echo 4]} {[echo 5]} {[echo 6]} {[echo 7]} {[echo 8]} {[echo 9]} {[echo 10]} {[echo 11]} {[echo 12]} {[echo 13]} {[echo 14]} {[echo 15]} {[echo 16]} {[echo 17]} {[echo 18]} {[echo 19]} {[echo 20]} {[echo 21]} {[echo 22]} {[echo 23]} {[echo 24]} {[echo 25]} {[echo 26]} {[echo 27]} {[echo 28]} {[echo 29]} {[echo 30]} {[echo 31]} {[echo 32]} {[echo 33]} {[echo 34]} {[echo 35]} {[echo 36]} {[echo 37]} {[echo 38]} {[echo 39]} {[echo 40]} {[echo 41]} {[echo 42]} {[echo 43]} {[echo 44]} {[echo 45]} {[echo 46]} {[echo 47]} {[echo 48]} {[echo 49]} {[echo 50]} {[echo 51]} {[echo 52]} {[echo 53]} {[echo 54]} {[echo 55]} {[echo 56]} {[echo 57]} {[echo 58]} {[echo 59]} {[echo 60]} {[echo 61]} {[echo 62]} {[echo 63]} {[echo 64]} {[echo 65]} {[echo 66]} {[echo 67]} {[echo 68]} {[echo 69]} {[echo 70]} {[echo 71]} {[echo 72]} {[echo 73]} {[echo 74]} {[echo 75]} {[echo 76]} {[echo 77]} {[echo 78]} {[echo 79]} {[echo 80]} {[echo 81]} {[echo 82]} {[echo 83]} {[echo 84]} {[echo 85]} {[echo 86]} {[echo 87]} {[echo 88]} {[echo 89]} {[echo 90]} {[echo 91]} {[echo 92]} {[echo 93]} {[echo 94]} {[echo 95]} {[echo 96]} {[echo 97]} {[echo 98]} {[echo 99]} {[echo 100]} {[echo 101]} {[echo 102]} {[echo 103]} {[echo 104]} {[echo 105]} {[echo 106]} {[echo 107]} {[echo 108]} {[echo 109]} {[echo 110]} {[echo 111]} {[echo 112]} {[echo 113]} {[echo 114]} {[echo 115]} {[echo 116]} {[echo 117]} {[echo 118]} {[echo 119]} {[echo 120]} {[echo 121]} {[echo 122]} {[echo 123]} {[echo 124]} {[echo 125]} {[echo 126]} {[echo 127]} {[echo 128]} {[echo 129]} {[echo 130]} {[echo 131]} {[echo 132]} {[echo 133]} {[echo 134]} {[echo 135]} {[echo 136]} {[echo 137]} {[echo 138]} {[echo 139]} {[echo 140]} {[echo 141]} {[echo 142]} {[echo 143]} {[echo 144]} {[echo 145]} {[echo 146]} {[echo 147]} {[echo 148]} {[echo 149]} {[echo 150]} {[echo 151]} {[echo 152]} {[echo 153]} {[echo 154]} {[echo 155]} {[echo 156]} {[echo 157]} {[echo 158]} {[echo 159]} {[echo 160]} {[echo 161]} {[echo 162]} {[echo 163]} {[echo 164]} {[echo 165]} {[echo 166]} {[echo 167]} {[echo 168]} {[echo 169]} {[echo 170]} {[echo 171]} {[echo 172]} {[echo 173]} {[echo 174]} {[echo 175]} {[echo 176]} {[echo 177]} {[echo 178]} {[echo 179]} {[echo 180]} {[echo 181]} {[echo 182]} {[echo 183]} {[echo 184]} {[echo 185]} {[echo 186]} {[echo 187]} {[echo 188]} {[echo 189]} {[echo 190]} {[echo 191]} {[echo 192]} {[echo 193]} {[echo 194]} {[echo 195]} {[echo 196]} {[echo 197]} {[echo 198]} {[echo 199]} {[echo 200]} {[echo 201]} {[echo 202]} {[echo 203]} {[echo 204]} {[echo 205]} {[echo 206]} {[echo 207]} {[echo 208]} {[echo 209]} {[echo 210]} {[echo 211]} {[echo 212]} {[echo 213]} {[echo 214]} {[echo 215]} {[echo 216]} {[echo 217]} {[echo 218]} {[echo 219]} {[echo 220]} {[echo 221]} {[echo 222]} {[echo 223]} {[echo 224]} {[echo 225]} {[echo 226]} {[echo 227]} {[echo 228]} {[echo 229]} {[echo 230]} {[echo 231]} {[echo 232]} {[echo 233]} {[echo 234]} {[echo 235]} {[echo 236]} {[echo 237]} {[echo 238]} {[echo 239]} {[echo 240]} {[echo 241]} {[echo 242]} {[echo 243]} {[echo 244]} {[echo 245]} {[echo 246]} {[echo 247]} {[echo 248]} {[echo 249]} {[echo 250]} {[echo 251]} {[echo 252]} {[echo 253]} {[echo 254]} {[echo 255]}}
}